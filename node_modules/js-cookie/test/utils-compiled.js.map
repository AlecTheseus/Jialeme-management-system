{"version":3,"sources":["utils.js"],"names":[],"mappings":"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","file":"utils-compiled.js","sourcesContent":["// https://github.com/axemclion/grunt-saucelabs#test-result-details-with-qunit\n(function () {\n\t'use strict';\n\n\tvar log = [];\n\n\tQUnit.done(function (test_results) {\n\t\tvar tests = [];\n\t\tfor (var i = 0, len = log.length; i < len; i++) {\n\t\t\tvar details = log[i];\n\t\t\ttests.push({\n\t\t\t\tname: details.name,\n\t\t\t\tresult: details.result,\n\t\t\t\texpected: details.expected,\n\t\t\t\tactual: details.actual,\n\t\t\t\tsource: details.source\n\t\t\t});\n\t\t}\n\t\ttest_results.tests = tests;\n\t\t// Required for exposing test results to the Sauce Labs API.\n\t\t// Can be removed when the following issue is fixed:\n\t\t// https://github.com/axemclion/grunt-saucelabs/issues/84\n\t\twindow.global_test_results = test_results;\n\t});\n\n\tQUnit.testStart(function (testDetails) {\n\t\tQUnit.log(function (details) {\n\t\t\tif (!details.result) {\n\t\t\t\tdetails.name = testDetails.name;\n\t\t\t\tlog.push(details);\n\t\t\t}\n\t\t});\n\t});\n\n\twindow.lifecycle = {\n\t\tafterEach: function () {\n\t\t\t// Remove the cookies created using js-cookie default attributes\n\t\t\tObject.keys(Cookies.get()).forEach(Cookies.remove);\n\t\t\t// Remove the cookies created using browser default attributes\n\t\t\tObject.keys(Cookies.get()).forEach(function (cookie) {\n\t\t\t\tCookies.remove(cookie, {\n\t\t\t\t\tpath: ''\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n\n\twindow.addEvent = function (element, eventName, fn) {\n\t\tvar method = 'addEventListener';\n\t\tif (element.attachEvent) {\n\t\t\teventName = 'on' + eventName;\n\t\t\tmethod = 'attachEvent';\n\t\t}\n\t\telement[ method ](eventName, fn);\n\t};\n\n\twindow.using = function (assert) {\n\t\tfunction getQuery(key) {\n\t\t\tvar queries = location.href.split('?')[1];\n\t\t\tif (!queries) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar pairs = queries.split(/&|=/);\n\t\t\tvar indexBaseURL = pairs.indexOf(key);\n\t\t\tvar result = pairs[indexBaseURL + 1];\n\t\t\tif (result) {\n\t\t\t\treturn decodeURIComponent(result);\n\t\t\t}\n\t\t}\n\t\tfunction setCookie(name, value) {\n\t\t\treturn {\n\t\t\t\tthen: function (callback) {\n\t\t\t\t\tvar iframe = document.getElementById('request_target');\n\t\t\t\t\tvar serverURL = getQuery('integration_baseurl');\n\t\t\t\t\tCookies.set(name, value);\n\t\t\t\t\tif (!serverURL) {\n\t\t\t\t\t\tcallback(Cookies.get(name), document.cookie);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar requestURL = [\n\t\t\t\t\t\t\tserverURL,\n\t\t\t\t\t\t\t'encoding?',\n\t\t\t\t\t\t\t'name=' + encodeURIComponent(name),\n\t\t\t\t\t\t\t'&value=' + encodeURIComponent(value)\n\t\t\t\t\t\t].join('');\n\t\t\t\t\t\tvar done = assert.async();\n\t\t\t\t\t\taddEvent(iframe, 'load', function () {\n\t\t\t\t\t\t\tvar iframeDocument = iframe.contentWindow.document;\n\t\t\t\t\t\t\tvar root = iframeDocument.documentElement;\n\t\t\t\t\t\t\tvar content = root.textContent;\n\t\t\t\t\t\t\tif (!content) {\n\t\t\t\t\t\t\t\tok(false, [\n\t\t\t\t\t\t\t\t\t'\"' + requestURL + '\"',\n\t\t\t\t\t\t\t\t\t'content should not be empty'\n\t\t\t\t\t\t\t\t].join(' '));\n\t\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tvar result = JSON.parse(content);\n\t\t\t\t\t\t\t\tcallback(result.value, iframeDocument.cookie);\n\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tiframe.src = requestURL;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tsetCookie: setCookie\n\t\t};\n\t};\n\n\twindow.loadFileSync = function (path) {\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.open('GET', path, false);\n\t\txhr.send(null);\n\t\treturn xhr.status === 200 ? xhr.responseText : null;\n\t};\n\n\twindow.quoted = function (input) {\n\t\treturn '\"' + input + '\"';\n\t};\n\n}());\n"]}
{"version":3,"sources":["wiki.js"],"names":[],"mappings":"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","file":"wiki-compiled.js","sourcesContent":["function readFile(name) {\n  var r\n  new Ajax.Request(\"projects/\" + name + \".txt\", {\n    method:       \"get\",\n    asynchronous: false,\n    onSuccess:    function(transport) { r = transport.responseText },\n    onFailure:    function(transport) { r = \"\" },\n    onException:  function(x)         { console.log(x) }\n  })\n  return r\n}\n\nfunction writeFile(name, text) {\n  var ok = true\n  new Ajax.Request(\"projects/\" + name + \".txt\", {\n    method:       \"put\",\n    asynchronous: false,\n    postBody:     text,\n    onFailure:    function() { ok = false }\n  })\n  if (!ok)\n    throw \"unable to write file '\" + name + \"'\"\n}\n\nfunction projectIsDirty() { return $('workspaceForm').source.value != $('workspaceForm').source.origValue }\ndirtyAreYouSureMessage = \"The changes you have made to this project will be lost unless you press 'cancel' \" +\n                         \"and save your work. Proceed?\"\n\nwindow.onbeforeunload = function() { if (projectIsDirty()) return dirtyAreYouSureMessage }\n\nfunction loadProject() {\n  if (arguments.length > 0) {\n    if (arguments[0] == \"\" || \"#\" + arguments[0] == document.location.hash)\n      return\n    document.location.hash = hashChangedHandler.oldHash = \"#\" + arguments[0]\n  }\n  if (projectIsDirty() && !confirm(dirtyAreYouSureMessage))\n    return\n  var projName = document.location.hash.substring(1),\n      projData = readFile(projName)\n  $('workspaceForm').source.value     = projData\n  $('workspaceForm').source.origValue = projData\n  $('title').innerHTML = \"<font color=#000088>\" + projName.replace(/_/g, \" \") + \"</font>\" + titleRest\n}\n\nfunction saveProject() {\n  try {\n    var projName = document.location.hash.substring(1),\n        projData = $('workspaceForm').source.value\n    // the following is an ugly hack to fix a bug in prototype.js\n    if (projData == \"\")\n      projData = \" \"\n    writeFile(projName, projData)\n    $('workspaceForm').source.origValue = projData\n    alert(\"Project '\" + projName + \"' saved\")\n  }\n  catch (e) {\n    alert(\"Error: \" + e + \"\\n\" +\n          \"Please save your work locally (by cutting and pasting),\\n\" +\n          \"and let Alex know about this problem.\")\n    throw e\n  }\n}\n\nhashChangedHandler = function() {\n  if (document.location.hash == hashChangedHandler.oldHash)\n    return\n  hashChangedHandler.oldHash = document.location.hash\n  loadProject()\n}\nhashChangedHandler.oldHash    = document.location.hash\nhashChangedHandler.intervalId = setInterval(hashChangedHandler, 1000)\n\n"]}